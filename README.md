# E-commerce Core System

**ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ì™€ ë¶„ì‚° íŠ¸ëœì­ì…˜ ì„¤ê³„**

---

## ğŸ“‹ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [STEP 15: ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ êµ¬í˜„](#2-step-15-ì´ë²¤íŠ¸-ê¸°ë°˜-ì•„í‚¤í…ì²˜-êµ¬í˜„)
3. [STEP 16: ë¶„ì‚° íŠ¸ëœì­ì…˜ ì„¤ê³„](#3-step-16-ë¶„ì‚°-íŠ¸ëœì­ì…˜-ì„¤ê³„)
4. [í•µì‹¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#4-í•µì‹¬-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)
5. [ê¸°ìˆ  ìŠ¤íƒ](#5-ê¸°ìˆ -ìŠ¤íƒ)
6. [ì‹¤í–‰ ë°©ë²•](#6-ì‹¤í–‰-ë°©ë²•)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

Spring Boot 3.5.7ê³¼ Java 17 ê¸°ë°˜ì˜ ì´ì»¤ë¨¸ìŠ¤ ë°±ì—”ë“œ ì‹œìŠ¤í…œìœ¼ë¡œ, **ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜**ì™€ **ë¶„ì‚° íŠ¸ëœì­ì…˜ íŒ¨í„´**ì„ ì ìš©í•˜ì—¬ í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ ì„¤ê³„í–ˆë‹¤.

### í•µì‹¬ ëª©í‘œ

1. **ê´€ì‹¬ì‚¬ ë¶„ë¦¬** - ì´ë²¤íŠ¸ë¥¼ í™œìš©í•œ íŠ¸ëœì­ì…˜ ë° ë„ë©”ì¸ ë¡œì§ ë¶„ë¦¬
2. **í™•ì¥ì„± í™•ë³´** - MSA ì „í™˜ì„ ëŒ€ë¹„í•œ ë¶„ì‚° íŠ¸ëœì­ì…˜ ì„¤ê³„
3. **ì•ˆì •ì„± í–¥ìƒ** - ì™¸ë¶€ API ì‹¤íŒ¨ê°€ í•µì‹¬ ë¡œì§ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šë„ë¡ ê°œì„ 

### ì•„í‚¤í…ì²˜ ì§„í™”

```
[Before]
ëª¨ë†€ë¦¬ì‹ - ë‹¨ì¼ íŠ¸ëœì­ì…˜ - ê°•í•œ ê²°í•©

[After - STEP 15]
ì´ë²¤íŠ¸ ê¸°ë°˜ - íŠ¸ëœì­ì…˜ ë¶„ë¦¬ - ê´€ì‹¬ì‚¬ ë¶„ë¦¬

[Future - STEP 16 ì„¤ê³„]
MSA - ë¶„ì‚° íŠ¸ëœì­ì…˜ - SAGA íŒ¨í„´
```

---

## 2. STEP 15: ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ êµ¬í˜„

### 2.1 ë°°ê²½: ì™œ ì´ë²¤íŠ¸ê°€ í•„ìš”í•œê°€?

**ê¸°ì¡´ ë¬¸ì œ:**

```java
@Transactional
public OrderResponse createOrder(CreateOrderRequest request) {
    // í•µì‹¬ ë¡œì§
    Order order = orderFacade.createOrder(...);

    // ë¶€ê°€ ë¡œì§ (ì™¸ë¶€ API í˜¸ì¶œ)
    externalDataPlatformService.sendOrderData(order);  // âŒ ë¬¸ì œ!

    return OrderResponse.from(order);
}
```

**ë¬¸ì œì :**
- ì™¸ë¶€ API ì‹¤íŒ¨ ì‹œ ì „ì²´ ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ ì‹¤íŒ¨
- ì™¸ë¶€ API ì§€ì—° ì‹œ ì‚¬ìš©ì ì‘ë‹µ ì§€ì—°
- í•µì‹¬ ë¡œì§ê³¼ ë¶€ê°€ ë¡œì§ì´ ê°•í•˜ê²Œ ê²°í•©

### 2.2 í•´ê²°: ì´ë²¤íŠ¸ ê¸°ë°˜ ë¶„ë¦¬

**ê°œì„ ëœ ì½”ë“œ:**

```java
// 1. ì£¼ë¬¸ ì„œë¹„ìŠ¤ (í•µì‹¬ ë¡œì§ë§Œ ì§‘ì¤‘)
@Transactional
public OrderResponse createOrder(CreateOrderRequest request) {
    OrderFacade.OrderResult result = orderFacade.createOrder(...);

    // ì´ë²¤íŠ¸ ë°œí–‰ (Order ì—”í‹°í‹° ì§ì ‘ ì „ë‹¬)
    eventPublisher.publishEvent(new OrderCompletedEvent(result.order()));

    return OrderResponse.from(result);
}

// 2. ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ (ë¶€ê°€ ë¡œì§ ë¶„ë¦¬)
@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
@Async
public void handleOrderCompleted(OrderCompletedEvent event) {
    try {
        externalDataPlatformService.sendOrderData(event.order());
    } catch (Exception e) {
        log.warn("ì™¸ë¶€ ë°ì´í„° ì „ì†¡ ì‹¤íŒ¨ (ì£¼ë¬¸ì€ ì •ìƒ ì™„ë£Œ)", e);
    }
}
```

**ê°œì„  íš¨ê³¼:**

| í•­ëª© | Before | After |
|------|--------|-------|
| **ì™¸ë¶€ API ì‹¤íŒ¨ ì‹œ** | ì£¼ë¬¸ ì „ì²´ ì‹¤íŒ¨ âŒ | ì£¼ë¬¸ì€ ì„±ê³µ âœ… |
| **ì™¸ë¶€ API ì§€ì—° ì‹œ** | ì‚¬ìš©ì ëŒ€ê¸° | ì¦‰ì‹œ ì‘ë‹µ |
| **íŠ¸ëœì­ì…˜ ë²”ìœ„** | ì™¸ë¶€ API í¬í•¨ | í•µì‹¬ ë¡œì§ë§Œ |
| **ê´€ì‹¬ì‚¬ ë¶„ë¦¬** | ê°•í•œ ê²°í•© | ëŠìŠ¨í•œ ê²°í•© |

### 2.3 í•µì‹¬ êµ¬í˜„ í¬ì¸íŠ¸

#### (1) AFTER_COMMIT ì‹œì  ì´ë²¤íŠ¸ ì²˜ë¦¬

```java
@TransactionalEventListener(phase = TransactionPhase.AFTER_COMMIT)
```

- íŠ¸ëœì­ì…˜ ì»¤ë°‹ **í›„** ì´ë²¤íŠ¸ ì‹¤í–‰
- ì£¼ë¬¸ ë°ì´í„°ê°€ DBì— ì•ˆì „í•˜ê²Œ ì €ì¥ëœ í›„ ì™¸ë¶€ ì „ì†¡

#### (2) ë¹„ë™ê¸° ì²˜ë¦¬

```java
@Async
```

- ë³„ë„ ìŠ¤ë ˆë“œì—ì„œ ì‹¤í–‰
- ë©”ì¸ íŠ¸ëœì­ì…˜ì— ì˜í–¥ ì—†ìŒ

#### (3) Order ì—”í‹°í‹° ì§ì ‘ ì „ë‹¬

```java
public record OrderCompletedEvent(Order order) {}
```

**ì™œ IDê°€ ì•„ë‹Œ ì—”í‹°í‹°ë¥¼ ì „ë‹¬í–ˆë‚˜?**
- DB ì¬ì¡°íšŒ ë¶ˆí•„ìš” (ì„±ëŠ¥ í–¥ìƒ)
- íŠ¸ëœì­ì…˜ íƒ€ì´ë° ì´ìŠˆ íšŒí”¼
- ìƒì„¸ ë‚´ìš©: [`docs/troubleshooting/event-listener-order-not-found.md`](./docs/troubleshooting/event-listener-order-not-found.md)

### 2.4 ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
[ì‚¬ìš©ì ìš”ì²­]
     â†“
[CreateOrderUseCase]
     â†“
[CreateOrderService] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  - ì¬ê³  ì°¨ê°                          â”‚
  - ì¿ í° ì‚¬ìš©                          â”‚
  - ì”ì•¡ ì°¨ê°                          â”‚ @Transactional
  - ì£¼ë¬¸ ìƒì„±                          â”‚
  - ê²°ì œ ì²˜ë¦¬                          â”‚
  - OrderCompletedEvent ë°œí–‰           â”‚
     â†“                                 â”‚
[íŠ¸ëœì­ì…˜ ì»¤ë°‹] â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†“
[AFTER_COMMIT]
     â†“
[OrderEventListener] @Async â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  - ì™¸ë¶€ ë°ì´í„° í”Œë«í¼ ì „ì†¡             â”‚ ë³„ë„ ìŠ¤ë ˆë“œ
  - ì‹¤íŒ¨í•´ë„ ì£¼ë¬¸ì€ ì´ë¯¸ ì„±ê³µ           â”‚
     â†“                                 â”‚
[External API] â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. STEP 16: ë¶„ì‚° íŠ¸ëœì­ì…˜ ì„¤ê³„

### 3.1 ë¬¸ì œ ì¸ì‹: MSAë¡œ ë¶„ë¦¬í•˜ë©´?

**í˜„ì¬ (ëª¨ë†€ë¦¬ì‹):**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ëª¨ë‘ ì²˜ë¦¬          â”‚
â”‚                                         â”‚
â”‚  ì¬ê³  ì°¨ê° â†’ ì¿ í° ì‚¬ìš© â†’ ì”ì•¡ ì°¨ê°       â”‚
â”‚  â†’ ì£¼ë¬¸ ìƒì„± â†’ ê²°ì œ ì²˜ë¦¬                â”‚
â”‚                                         â”‚
â”‚  âœ… ì „ì²´ ì„±ê³µ or ì „ì²´ ë¡¤ë°±               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**MSA ì „í™˜ í›„:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Product  â”‚  â”‚  Coupon  â”‚  â”‚   User   â”‚  â”‚  Order   â”‚
â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚
â”‚          â”‚  â”‚          â”‚  â”‚          â”‚  â”‚          â”‚
â”‚  TX1 âœ…  â”‚  â”‚  TX2 âœ…  â”‚  â”‚  TX3 âœ…  â”‚  â”‚  TX4 âŒ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ ë¬¸ì œ: ì£¼ë¬¸ë§Œ ì‹¤íŒ¨í–ˆëŠ”ë°, ì¬ê³ /ì¿ í°/ì”ì•¡ì€ ì´ë¯¸ ì²˜ë¦¬ë¨!
```

### 3.2 í•´ê²°: SAGA íŒ¨í„´ ì ìš©

**SAGA Orchestration ë°©ì‹ ì„ íƒ**

```
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Order Orchestrator   â”‚
                â”‚   (ì¡°ì •ì)           â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                 â–¼                 â–¼
   1. Product Svc    2. Coupon Svc     3. User Svc
      ì¬ê³  ì°¨ê°          ì¿ í° ì‚¬ìš©          ì”ì•¡ ì°¨ê°
         â”‚                 â”‚                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    [ê²°ê³¼ ìˆ˜ì§‘ ë° íŒë‹¨]
                           â”‚
                    ì‹¤íŒ¨ ì‹œ ë³´ìƒ íŠ¸ëœì­ì…˜
```

### 3.3 ë³´ìƒ íŠ¸ëœì­ì…˜ ì„¤ê³„

ê° ë‹¨ê³„ë§ˆë‹¤ ë³´ìƒ(ë¡¤ë°±) ë¡œì§ì„ ì •ì˜:

| ì •ìƒ íŠ¸ëœì­ì…˜ | ë³´ìƒ íŠ¸ëœì­ì…˜ |
|--------------|--------------|
| `decreaseStock()` | `increaseStock()` (ì¬ê³  ë³µêµ¬) |
| `useCoupon()` | `restoreCoupon()` (ì¿ í° ë³µêµ¬) |
| `decreaseBalance()` | `increaseBalance()` (ì”ì•¡ í™˜ë¶ˆ) |
| `createOrder()` | `cancelOrder()` (ì£¼ë¬¸ ì·¨ì†Œ) |

**ì‹¤íŒ¨ ì‹œ ë³´ìƒ íë¦„:**

```
ì •ìƒ: 1 â†’ 2 â†’ 3 â†’ 4 â†’ 5
ì‹¤íŒ¨: 5ë‹¨ê³„ ì‹¤íŒ¨ â†’ 4 ë³´ìƒ â†’ 3 ë³´ìƒ â†’ 2 ë³´ìƒ â†’ 1 ë³´ìƒ
```

### 3.4 í•µì‹¬ ê³ ë ¤ì‚¬í•­

#### (1) ë©±ë“±ì„± ë³´ì¥

```java
@PostMapping("/orders")
public OrderResponse createOrder(
    @RequestBody OrderRequest request,
    @RequestHeader("Idempotency-Key") String idempotencyKey
) {
    // ì¤‘ë³µ ìš”ì²­ ë°©ì§€
    Optional<OrderResult> cached = cacheService.get(idempotencyKey);
    if (cached.isPresent()) {
        return cached.get();
    }

    // ì²˜ë¦¬ í›„ ê²°ê³¼ ìºì‹±
    OrderResult result = orchestrator.executeOrder(request);
    cacheService.put(idempotencyKey, result, Duration.ofHours(24));

    return result;
}
```

#### (2) ë³´ìƒ ì‹¤íŒ¨ ëŒ€ì‘

```
ë³´ìƒ íŠ¸ëœì­ì…˜ë„ ì‹¤íŒ¨í•  ìˆ˜ ìˆìŒ
  â†“
ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ (@Retry)
  â†“
ì‹¤íŒ¨ ì‹œ Dead Letter Queue
  â†“
ê´€ë¦¬ì ìˆ˜ë™ ì²˜ë¦¬ or ë°°ì¹˜ ì¬ì‹œë„
```

### 3.5 ìƒì„¸ ì„¤ê³„ ë¬¸ì„œ

ì „ì²´ ì•„í‚¤í…ì²˜ ë° ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨ì€ [`docs/TRANSACTION_DIAGNOSIS.md`](./docs/TRANSACTION_DIAGNOSIS.md) ì°¸ê³ 

---

## 4. í•µì‹¬ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 4.1 @TransactionalEventListener íƒ€ì´ë° ì´ìŠˆ

**ë¬¸ì œ:**
```
@TransactionalEventListener(AFTER_COMMIT) + @Async ì¡°í•© ì‹œ
ìƒˆë¡œìš´ ìŠ¤ë ˆë“œê°€ DBì—ì„œ ì£¼ë¬¸ì„ ì¡°íšŒí–ˆëŠ”ë° NULL ë°˜í™˜!
```

**ì›ì¸:**
- AFTER_COMMIT = ì»¤ë°‹ ëª…ë ¹ì„ ë³´ë‚¸ ì§í›„
- MySQL MVCC + REPEATABLE READ ê²©ë¦¬ ìˆ˜ì¤€
- ìƒˆ íŠ¸ëœì­ì…˜ì˜ ìŠ¤ëƒ…ìƒ·ì´ ì»¤ë°‹ ì „ì— ìƒì„±ë¨

**í•´ê²°:**
```java
// Before: IDë§Œ ì „ë‹¬ (DB ì¬ì¡°íšŒ í•„ìš”)
eventPublisher.publishEvent(new OrderCompletedEvent(orderId));

// After: ì—”í‹°í‹° ì§ì ‘ ì „ë‹¬ (ì¬ì¡°íšŒ ë¶ˆí•„ìš”)
eventPublisher.publishEvent(new OrderCompletedEvent(order));
```

**ìƒì„¸:**
[`docs/troubleshooting/event-listener-order-not-found.md`](./docs/troubleshooting/event-listener-order-not-found.md)

### 4.2 @Asyncì˜ ì–´ë‘ìš´ ë©´

íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ê³¼ì •ì—ì„œ ë°œê²¬í•œ ì¤‘ìš”í•œ ì‚¬ì‹¤:

**"@AsyncëŠ” ì†Œê·œëª¨ì—ì„œë§Œ ì•ˆì „í•˜ë‹¤"**

```
CPU 8ì½”ì–´ ì„œë²„ì—ì„œ:
- í†°ìº£ ìŠ¤ë ˆë“œ 200ê°œ
- @Async ìŠ¤ë ˆë“œ 100ê°œ
â†’ ì‹¤ì œ ë™ì‹œ ì‹¤í–‰: 8ê°œ (CPU ì½”ì–´ ìˆ˜)
â†’ ë‚˜ë¨¸ì§€ 292ê°œ: ì¤„ ì„œì„œ ëŒ€ê¸°
â†’ Context Switching í­ë°œ
â†’ ì„±ëŠ¥ ì €í•˜ ë° ì„œë²„ ë‹¤ìš´ ìœ„í—˜
```

**ê³ íŠ¸ë˜í”½ í™˜ê²½ì—ì„œëŠ” Kafka ê°™ì€ ë©”ì‹œì§€ ë¸Œë¡œì»¤ í•„ìˆ˜**

ìƒì„¸ í•™ìŠµ ë‚´ìš©:
[`docs/troubleshooting/event-listener-order-not-found.md#-asyncã®ì–´ë‘ìš´-ë©´ì„-ë°œê²¬í•˜ë‹¤`](./docs/troubleshooting/event-listener-order-not-found.md#-asyncì˜-ì–´ë‘ìš´-ë©´ì„-ë°œê²¬í•˜ë‹¤)

---

## 5. ê¸°ìˆ  ìŠ¤íƒ

### í•µì‹¬ ê¸°ìˆ 

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ  | ë²„ì „ |
|---------|------|------|
| **ì–¸ì–´** | Java | 17 |
| **í”„ë ˆì„ì›Œí¬** | Spring Boot | 3.5.7 |
| **ë°ì´í„°ë² ì´ìŠ¤** | MySQL | 8.0 |
| **ìºì‹œ/ë©”ì‹œì§€** | Redis | 7.0 |
| **ë™ì‹œì„± ì œì–´** | Redisson | 3.x |
| **í…ŒìŠ¤íŠ¸** | JUnit 5, Testcontainers | - |

### ì£¼ìš” íŒ¨í„´ ë° ê¸°ë²•

- **ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜** (Event-Driven Architecture)
- **SAGA íŒ¨í„´** (Orchestration)
- **ë³´ìƒ íŠ¸ëœì­ì…˜** (Compensating Transaction)
- **ë©±ë“±ì„± ë³´ì¥** (Idempotency Key)
- **ë¹„ë™ê¸° ì²˜ë¦¬** (@Async, @TransactionalEventListener)
- **ë¶„ì‚° ë½** (Redisson)
- **Redis ìë£Œêµ¬ì¡° í™œìš©** (Sorted Set, List, Set)

---

## 6. ì‹¤í–‰ ë°©ë²•

### 6.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Java 17
- Docker & Docker Compose (MySQL, Redis)

### 6.2 ì‹¤í–‰

```bash
# 1. í”„ë¡œì íŠ¸ í´ë¡ 
git clone <repository-url>
cd ecommerce-core

# 2. Docker ì»¨í…Œì´ë„ˆ ì‹œì‘ (MySQL, Redis)
docker-compose up -d

# 3. ë¹Œë“œ ë° ì‹¤í–‰
./gradlew bootRun

# 4. í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./gradlew test
```

### 6.3 ì£¼ìš” API

```bash
# ì£¼ë¬¸ ìƒì„± (ì´ë²¤íŠ¸ ë°œí–‰)
POST /api/orders
Content-Type: application/json

{
  "userId": "user123",
  "items": [...],
  "couponId": "coupon456"
}

# ì¸ê¸° ìƒí’ˆ ì¡°íšŒ (Redis Sorted Set)
GET /api/products/popular?days=3&limit=5

# ì¿ í° ë°œê¸‰ (Redis Queue)
POST /api/coupons/{couponId}/issue
```

---

## 7. ë¬¸ì„œ

### í•µì‹¬ ë¬¸ì„œ

1. **íŠ¸ëŸ¬ë¸”ìŠˆíŒ…**
   [`docs/troubleshooting/event-listener-order-not-found.md`](./docs/troubleshooting/event-listener-order-not-found.md)
   - @TransactionalEventListener íƒ€ì´ë° ì´ìŠˆ í•´ê²° ê³¼ì •
   - CPU, ìŠ¤ë ˆë“œ, @Async, Kafka í•™ìŠµ ë‚´ìš©
   - ìŠ¤í† ë¦¬í…”ë§ ë°©ì‹ì˜ í•™ìŠµ ê¸°ë¡

2. **ë¶„ì‚° íŠ¸ëœì­ì…˜ ì„¤ê³„**
   [`docs/TRANSACTION_DIAGNOSIS.md`](./docs/TRANSACTION_DIAGNOSIS.md)
   - MSA ì „í™˜ ì‹œë‚˜ë¦¬ì˜¤
   - SAGA íŒ¨í„´ ì„¤ê³„
   - ë³´ìƒ íŠ¸ëœì­ì…˜ ë° ë©±ë“±ì„± ë³´ì¥
   - ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

3. **API ì„¤ê³„**
   [`document/API_DESIGN.md`](./document/API_DESIGN.md)

4. **ì‹œí€€ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨**
   [`document/SEQUENCE_DIAGRAM.md`](./document/SEQUENCE_DIAGRAM.md)

---

## 8. í•™ìŠµ ì„±ê³¼

### ê¸°ìˆ ì  ì„±ì¥

**Before (STEP 14ê¹Œì§€):**
- Redis ìºì‹±, ë¶„ì‚° ë½ ì ìš©
- ë™ì‹œì„± ì œì–´ ì´í•´

**After (STEP 15-16):**
- ì´ë²¤íŠ¸ ê¸°ë°˜ ì•„í‚¤í…ì²˜ ì„¤ê³„ ëŠ¥ë ¥
- ë¶„ì‚° ì‹œìŠ¤í…œì˜ íŠ¸ëœì­ì…˜ ì²˜ë¦¬ ì´í•´
- SAGA íŒ¨í„´ ë° ë³´ìƒ íŠ¸ëœì­ì…˜ ì„¤ê³„
- @Asyncì˜ í•œê³„ì™€ Kafkaì˜ í•„ìš”ì„± ì´í•´
- CPU, ìŠ¤ë ˆë“œ, Context Switching ë³¸ì§ˆ ì´í•´

### í•µì‹¬ ì¸ì‚¬ì´íŠ¸

1. **íŠ¸ëœì­ì…˜ ë²”ìœ„ëŠ” ìµœì†Œí™”í•´ì•¼ í•œë‹¤**
   - ì™¸ë¶€ API í˜¸ì¶œì€ íŠ¸ëœì­ì…˜ ë°–ìœ¼ë¡œ
   - ë¶€ê°€ ë¡œì§ì€ ì´ë²¤íŠ¸ë¡œ ë¶„ë¦¬

2. **ë¶„ì‚° í™˜ê²½ì—ì„œëŠ” ê°•í•œ ì¼ê´€ì„±ì„ í¬ê¸°í•˜ê³  ìµœì¢… ì¼ê´€ì„±ì„ ì„ íƒ**
   - SAGA íŒ¨í„´ìœ¼ë¡œ ë³´ìƒ íŠ¸ëœì­ì…˜ ì„¤ê³„
   - ë©±ë“±ì„± ë³´ì¥ í•„ìˆ˜

3. **@AsyncëŠ” ë§ŒëŠ¥ì´ ì•„ë‹ˆë‹¤**
   - ì†Œê·œëª¨ì—ì„œë§Œ ì•ˆì „
   - ê³ íŠ¸ë˜í”½ í™˜ê²½ì—ì„œëŠ” Kafka ê°™ì€ ë©”ì‹œì§€ ë¸Œë¡œì»¤ í•„ìš”

4. **ë¬¸ì œ í•´ê²° ê³¼ì •ì—ì„œ ì–»ëŠ” í•™ìŠµì´ ê°€ì¥ ê¹Šë‹¤**
   - ë‹¨ìˆœí•œ ì—ëŸ¬ í•˜ë‚˜ê°€ ì‹œìŠ¤í…œ ì„¤ê³„ì˜ ë³¸ì§ˆê¹Œì§€ ì—°ê²°ë¨

---

## 9. í–¥í›„ ê°œì„  ë°©í–¥

### ë‹¨ê¸° (1ê°œì›”)
- [ ] WebSocket/SSEë¡œ ì´ë²¤íŠ¸ ì²˜ë¦¬ ê²°ê³¼ ì‹¤ì‹œê°„ ì•Œë¦¼
- [ ] ì´ë²¤íŠ¸ ì¬ì²˜ë¦¬ ë©”ì»¤ë‹ˆì¦˜ (Retry + DLQ)

### ì¤‘ê¸° (3ê°œì›”)
- [ ] SAGA íŒ¨í„´ ì‹¤ì œ ì½”ë“œ êµ¬í˜„
- [ ] ì´ë²¤íŠ¸ ì†Œì‹±(Event Sourcing) ì ìš© ê²€í† 
- [ ] Kafka ë„ì… ë° ì„±ëŠ¥ ë¹„êµ

### ì¥ê¸° (6ê°œì›”)
- [ ] MSA ì‹¤ì œ ì „í™˜ (ë„ë©”ì¸ë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬)
- [ ] CQRS íŒ¨í„´ ì ìš©
- [ ] Distributed Tracing (Zipkin/Jaeger)

---

**ì‘ì„±ì:** ì¡°ì†”í•˜
**ê¸°ìˆ  ìŠ¤íƒ:** Java 17, Spring Boot 3.5.7, MySQL 8.0, Redis 7, Redisson
**ì£¼ìš” íŒ¨í„´:** Event-Driven Architecture, SAGA Pattern, Async Processing
