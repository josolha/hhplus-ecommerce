# STEP 16: íŠ¸ëœì­ì…˜ ë¶„ë¦¬ì— ë”°ë¥¸ ë¬¸ì œ ì§„ë‹¨ ë° í•´ê²° ë°©ì•ˆ

## ğŸ“‹ ëª©ì°¨
1. [í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„](#1-í˜„ì¬-ì‹œìŠ¤í…œ-ë¶„ì„)
2. [MSA ì „í™˜ ì‹œë‚˜ë¦¬ì˜¤](#2-msa-ì „í™˜-ì‹œë‚˜ë¦¬ì˜¤)
3. [íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œ](#3-íŠ¸ëœì­ì…˜-ë¶„ë¦¬-ì‹œ-ë°œìƒí•˜ëŠ”-ë¬¸ì œ)
4. [í•´ê²° ë°©ì•ˆ: ë¶„ì‚° íŠ¸ëœì­ì…˜ íŒ¨í„´](#4-í•´ê²°-ë°©ì•ˆ-ë¶„ì‚°-íŠ¸ëœì­ì…˜-íŒ¨í„´)
5. [ìµœì¢… ì•„í‚¤í…ì²˜ ì„¤ê³„](#5-ìµœì¢…-ì•„í‚¤í…ì²˜-ì„¤ê³„)

---

## 1. í˜„ì¬ ì‹œìŠ¤í…œ ë¶„ì„

### 1.1 ëª¨ë†€ë¦¬ì‹ ì•„í‚¤í…ì²˜

í˜„ì¬ ì´ì»¤ë¨¸ìŠ¤ ì‹œìŠ¤í…œì€ ëª¨ë“  ë„ë©”ì¸ì´ í•˜ë‚˜ì˜ ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í•˜ë‚˜ì˜ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       E-Commerce Application            â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Order   â”‚  â”‚ Product  â”‚            â”‚
â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Payment  â”‚  â”‚  Coupon  â”‚            â”‚
â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚  â”‚   User   â”‚                           â”‚
â”‚  â”‚ Service  â”‚                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚   MySQL DB    â”‚
      â”‚               â”‚
      â”‚ - orders      â”‚
      â”‚ - products    â”‚
      â”‚ - payments    â”‚
      â”‚ - coupons     â”‚
      â”‚ - users       â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 í˜„ì¬ ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ì˜ íŠ¸ëœì­ì…˜ ë²”ìœ„

**ì£¼ë¬¸ ìƒì„± ì‹œ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬ë˜ëŠ” ì‘ì—…ë“¤:**

```java
@Transactional
public OrderResponse createOrder(CreateOrderRequest request) {
    // 1. ì‚¬ìš©ì ê²€ì¦
    User user = userRepository.findById(userId);

    // 2. ì¬ê³  ì°¨ê° (Product)
    product.decreaseStock(quantity);

    // 3. ì¿ í° ì‚¬ìš© ì²˜ë¦¬ (Coupon)
    if (couponId != null) {
        coupon.use();
    }

    // 4. ì”ì•¡ ì°¨ê° (User Balance)
    user.decreaseBalance(finalAmount);

    // 5. ì£¼ë¬¸ ìƒì„± (Order)
    Order order = Order.create(...);

    // 6. ê²°ì œ ì •ë³´ ì €ì¥ (Payment)
    Payment payment = Payment.create(...);

    return OrderResponse.from(order);
}
```

**ì¥ì :**
- ëª¨ë“  ì‘ì—…ì´ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ â†’ ACID ë³´ì¥
- ì¼ë¶€ ì‹¤íŒ¨ ì‹œ ì „ì²´ ë¡¤ë°± â†’ ë°ì´í„° ì¼ê´€ì„± ìœ ì§€
- êµ¬í˜„ì´ ë‹¨ìˆœí•¨

**ë‹¨ì :**
- ëª¨ë“  ë„ë©”ì¸ì´ ê°•í•˜ê²Œ ê²°í•©
- í•œ ë„ë©”ì¸ì˜ ì¥ì• ê°€ ì „ì²´ ì‹œìŠ¤í…œì— ì˜í–¥
- í™•ì¥ì„± ì œí•œ (ìˆ˜ì§ í™•ì¥ë§Œ ê°€ëŠ¥)
- ë°°í¬ ë‹¨ìœ„ê°€ í¬ê³ , ë°°í¬ ì‹œ ì „ì²´ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ í•„ìš”

---

## 2. MSA ì „í™˜ ì‹œë‚˜ë¦¬ì˜¤

### 2.1 ë„ë©”ì¸ë³„ ì„œë¹„ìŠ¤ ë¶„ë¦¬

ë¹„ì¦ˆë‹ˆìŠ¤ í™•ì¥ì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ë„ë©”ì¸ë³„ë¡œ ì„œë¹„ìŠ¤ë¥¼ ë¶„ë¦¬í•œë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Order Service   â”‚   â”‚ Product Service  â”‚   â”‚ Payment Service  â”‚
â”‚                  â”‚   â”‚                  â”‚   â”‚                  â”‚
â”‚  - ì£¼ë¬¸ ìƒì„±      â”‚   â”‚  - ì¬ê³  ê´€ë¦¬      â”‚   â”‚  - ê²°ì œ ì²˜ë¦¬      â”‚
â”‚  - ì£¼ë¬¸ ì¡°íšŒ      â”‚   â”‚  - ìƒí’ˆ ì¡°íšŒ      â”‚   â”‚  - ê²°ì œ ë‚´ì—­      â”‚
â”‚  - ì£¼ë¬¸ ìƒíƒœ ê´€ë¦¬ â”‚   â”‚  - ì¸ê¸° ìƒí’ˆ      â”‚   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚                      â”‚
         â–¼                      â–¼                      â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Order DB â”‚          â”‚Product DBâ”‚          â”‚Payment DBâ”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Coupon Service  â”‚   â”‚   User Service   â”‚
â”‚                  â”‚   â”‚                  â”‚
â”‚  - ì¿ í° ë°œê¸‰      â”‚   â”‚  - ì‚¬ìš©ì ê´€ë¦¬    â”‚
â”‚  - ì¿ í° ì‚¬ìš©      â”‚   â”‚  - ì”ì•¡ ê´€ë¦¬      â”‚
â”‚  - ì¿ í° ì¡°íšŒ      â”‚   â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                      â”‚
         â–¼                      â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Coupon DBâ”‚          â”‚ User DB  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ì„œë¹„ìŠ¤ë³„ ì±…ì„ê³¼ ë°ì´í„°

| ì„œë¹„ìŠ¤ | ì±…ì„ | ì£¼ìš” ë°ì´í„° |
|--------|------|------------|
| **Order Service** | ì£¼ë¬¸ ìƒì„±, ì¡°íšŒ, ìƒíƒœ ê´€ë¦¬ | Order, OrderItem |
| **Product Service** | ìƒí’ˆ ê´€ë¦¬, ì¬ê³  ê´€ë¦¬, ì¸ê¸° ìƒí’ˆ ì§‘ê³„ | Product, Stock |
| **Payment Service** | ê²°ì œ ì²˜ë¦¬, ê²°ì œ ë‚´ì—­ ê´€ë¦¬ | Payment |
| **Coupon Service** | ì¿ í° ë°œê¸‰, ì‚¬ìš©, ê²€ì¦ | Coupon, UserCoupon |
| **User Service** | ì‚¬ìš©ì ê´€ë¦¬, ì”ì•¡ ê´€ë¦¬ | User, Balance |

---

## 3. íŠ¸ëœì­ì…˜ ë¶„ë¦¬ ì‹œ ë°œìƒí•˜ëŠ” ë¬¸ì œ

### 3.1 ë¬¸ì œ ìƒí™©: ë¶„ì‚° íŠ¸ëœì­ì…˜ì˜ ACID ê¹¨ì§

ëª¨ë†€ë¦¬ì‹ì—ì„œëŠ” í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬ë˜ë˜ ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ê°€, MSAì—ì„œëŠ” **5ê°œì˜ ë…ë¦½ì ì¸ íŠ¸ëœì­ì…˜**ìœ¼ë¡œ ë¶„ë¦¬ëœë‹¤.

```
[Before - ëª¨ë†€ë¦¬ì‹]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         @Transactional (ë‹¨ì¼ íŠ¸ëœì­ì…˜)            â”‚
â”‚                                                 â”‚
â”‚  ì¬ê³  ì°¨ê° â†’ ì¿ í° ì‚¬ìš© â†’ ì”ì•¡ ì°¨ê° â†’ ì£¼ë¬¸ ìƒì„± â†’ ê²°ì œ  â”‚
â”‚                                                 â”‚
â”‚  âœ… ì „ì²´ ì„±ê³µ ë˜ëŠ” ì „ì²´ ë¡¤ë°±                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[After - MSA]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì¬ê³  ì°¨ê°   â”‚  â”‚   ì¿ í° ì‚¬ìš©   â”‚  â”‚   ì”ì•¡ ì°¨ê°   â”‚  â”‚   ì£¼ë¬¸ ìƒì„±   â”‚  â”‚   ê²°ì œ ì²˜ë¦¬   â”‚
â”‚ (Product DB) â”‚  â”‚ (Coupon DB)  â”‚  â”‚  (User DB)   â”‚  â”‚  (Order DB)  â”‚  â”‚ (Payment DB) â”‚
â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
â”‚  TX1 âœ…      â”‚  â”‚  TX2 âœ…      â”‚  â”‚  TX3 âœ…      â”‚  â”‚  TX4 âœ…      â”‚  â”‚  TX5 âŒ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ ë¬¸ì œ: ê²°ì œë§Œ ì‹¤íŒ¨í–ˆëŠ”ë°, ì¬ê³ /ì¿ í°/ì”ì•¡ì€ ì´ë¯¸ ì²˜ë¦¬ë¨!
```

### 3.2 êµ¬ì²´ì ì¸ ì¥ì•  ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ê²°ì œ ì„œë¹„ìŠ¤ ì¥ì• 

```
1. Product Service: ì¬ê³  ì°¨ê° ì„±ê³µ âœ…
2. Coupon Service: ì¿ í° ì‚¬ìš© ì„±ê³µ âœ…
3. User Service: ì”ì•¡ ì°¨ê° ì„±ê³µ âœ…
4. Order Service: ì£¼ë¬¸ ìƒì„± ì„±ê³µ âœ…
5. Payment Service: íƒ€ì„ì•„ì›ƒ âŒ (ì„œë²„ ì¥ì• )

ê²°ê³¼:
- ì¬ê³ ëŠ” ì°¨ê°ë¨ (ë‹¤ë¥¸ ì‚¬ìš©ìê°€ êµ¬ë§¤ ëª»í•¨)
- ì¿ í°ì€ ì‚¬ìš©ë¨ (ë‹¤ì‹œ ëª» ì”€)
- ì”ì•¡ì€ ì°¨ê°ë¨ (ëˆì€ ë¹ ì ¸ë‚˜ê°)
- ì£¼ë¬¸ì€ ìƒì„±ë¨ (ì£¼ë¬¸ ë‚´ì—­ì— ë³´ì„)
- í•˜ì§€ë§Œ ê²°ì œ ê¸°ë¡ ì—†ìŒ!

ğŸ’¥ ë°ì´í„° ë¶ˆì¼ì¹˜ ë°œìƒ
```

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì¤‘ê°„ ë‹¨ê³„ ì‹¤íŒ¨

```
1. Product Service: ì¬ê³  ì°¨ê° ì„±ê³µ âœ…
2. Coupon Service: ì¿ í° ì‚¬ìš© ì„±ê³µ âœ…
3. User Service: ì”ì•¡ ë¶€ì¡± âŒ

ë¬¸ì œ:
- ì¬ê³ ì™€ ì¿ í°ì€ ì´ë¯¸ ì²˜ë¦¬ë¨
- ì”ì•¡ ë¶€ì¡±ìœ¼ë¡œ ì£¼ë¬¸ ì‹¤íŒ¨
- ì¬ê³ ì™€ ì¿ í°ì„ ë³µêµ¬í•´ì•¼ í•˜ëŠ”ë° ì–´ë–»ê²Œ?

ğŸ’¥ ì¼ë¶€ë§Œ ì„±ê³µí•œ ìƒíƒœë¡œ ë‚¨ìŒ
```

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ë„¤íŠ¸ì›Œí¬ ì§€ì—°ìœ¼ë¡œ ì¸í•œ íƒ€ì„ì•„ì›ƒ

```
1. Product Service: ì¬ê³  ì°¨ê° ìš”ì²­ â†’ íƒ€ì„ì•„ì›ƒ âŒ
   (ì‹¤ì œë¡œëŠ” ì„±ê³µí–ˆì§€ë§Œ ì‘ë‹µì„ ëª» ë°›ìŒ)

Order Service ì…ì¥:
- ì¬ê³  ì°¨ê° ì‹¤íŒ¨ë¡œ íŒë‹¨
- ì£¼ë¬¸ ìƒì„± ì¤‘ë‹¨

ì‹¤ì œ ìƒí™©:
- ì¬ê³ ëŠ” ì°¨ê°ë¨ (DBì— ë°˜ì˜ë¨)
- í•˜ì§€ë§Œ ì£¼ë¬¸ì€ ìƒì„± ì•ˆ ë¨

ğŸ’¥ ì¬ê³ ë§Œ ì°¨ê°ë˜ê³  ì£¼ë¬¸ ì—†ìŒ (ìœ ë ¹ ì¬ê³  ì°¨ê°)
```

### 3.3 ë¬¸ì œ ì •ë¦¬

| ë¬¸ì œ ìœ í˜• | ì„¤ëª… | ì˜ˆì‹œ |
|----------|------|------|
| **ë¶€ë¶„ ì‹¤íŒ¨** | ì¼ë¶€ ì„œë¹„ìŠ¤ëŠ” ì„±ê³µ, ì¼ë¶€ëŠ” ì‹¤íŒ¨ | ì¬ê³ O, ì¿ í°O, ê²°ì œX |
| **ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒ** | ì‹¤ì œë¡  ì„±ê³µí–ˆìœ¼ë‚˜ ì‘ë‹µ ëª» ë°›ìŒ | ì¬ê³  ì°¨ê° ì„±ê³µ but ì‘ë‹µ X |
| **ìˆœì„œ ë³´ì¥ ì‹¤íŒ¨** | ì„œë¹„ìŠ¤ í˜¸ì¶œ ìˆœì„œê°€ ë³´ì¥ ì•ˆ ë¨ | ê²°ì œ ë¨¼ì €, ì¬ê³  ì°¨ê° ë‚˜ì¤‘ |
| **ë³´ìƒ ì‹¤íŒ¨** | ë¡¤ë°± ì‹œë„ ì¤‘ ì¶”ê°€ ì‹¤íŒ¨ ë°œìƒ | ì¬ê³  ë³µêµ¬ ì‹œë„ ì¤‘ ì‹¤íŒ¨ |
| **ë°ì´í„° ì •í•©ì„±** | ì„œë¹„ìŠ¤ ê°„ ë°ì´í„° ë¶ˆì¼ì¹˜ | ì£¼ë¬¸ ìƒíƒœ != ê²°ì œ ìƒíƒœ |

---

## 4. í•´ê²° ë°©ì•ˆ: ë¶„ì‚° íŠ¸ëœì­ì…˜ íŒ¨í„´

### 4.1 SAGA íŒ¨í„´ ì„ íƒ

ë¶„ì‚° í™˜ê²½ì—ì„œ íŠ¸ëœì­ì…˜ ì¼ê´€ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ **SAGA íŒ¨í„´**ì„ ì ìš©í•œë‹¤.

**SAGA íŒ¨í„´ì´ë€?**
- ê¸´ íŠ¸ëœì­ì…˜ì„ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ë¡œì»¬ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ë¶„ë¦¬
- ê° ë¡œì»¬ íŠ¸ëœì­ì…˜ì€ ë…ë¦½ì ìœ¼ë¡œ ì»¤ë°‹
- ì‹¤íŒ¨ ì‹œ ì´ì „ ë‹¨ê³„ë¥¼ **ë³´ìƒ(compensate)**í•˜ì—¬ ë¡¤ë°±

### 4.2 Choreography vs Orchestration

#### ë°©ì‹ 1: Choreography (ì´ë²¤íŠ¸ ê¸°ë°˜)

ê° ì„œë¹„ìŠ¤ê°€ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•˜ê³  êµ¬ë…í•˜ì—¬ ììœ¨ì ìœ¼ë¡œ ë™ì‘

```
Order Service â†’ [OrderCreated ì´ë²¤íŠ¸ ë°œí–‰]
                       â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼             â–¼             â–¼             â–¼
   Product Svc   Coupon Svc     User Svc    Payment Svc
   (ì¬ê³  ì°¨ê°)    (ì¿ í° ì‚¬ìš©)    (ì”ì•¡ ì°¨ê°)   (ê²°ì œ ì²˜ë¦¬)
         â”‚             â”‚             â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
              [ê°ì ì„±ê³µ/ì‹¤íŒ¨ ì´ë²¤íŠ¸ ë°œí–‰]
                       â†“
              Order Serviceê°€ ìˆ˜ì§‘í•˜ì—¬ ìµœì¢… íŒë‹¨
```

**ì¥ì :**
- ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ ë‚®ìŒ
- í™•ì¥ì„± ì¢‹ìŒ

**ë‹¨ì :**
- ì „ì²´ íë¦„ íŒŒì•… ì–´ë ¤ì›€
- ë””ë²„ê¹… ë³µì¡í•¨
- ìˆœí™˜ ì˜ì¡´ ìœ„í—˜

#### ë°©ì‹ 2: Orchestration (ì¤‘ì•™ ì¡°ì •)

**ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´í„°(Orchestrator)**ê°€ ì „ì²´ íë¦„ì„ ì œì–´

```
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚ Order Orchestrator   â”‚
                â”‚  (ì£¼ë¬¸ ì¡°ì •ì)        â”‚
                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼                 â–¼                 â–¼             â–¼
   1. Product Svc    2. Coupon Svc     3. User Svc   4. Payment Svc
      ì¬ê³  ì°¨ê°          ì¿ í° ì‚¬ìš©          ì”ì•¡ ì°¨ê°       ê²°ì œ ì²˜ë¦¬
         â”‚                 â”‚                 â”‚             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                      [ê²°ê³¼ ìˆ˜ì§‘]
                           â”‚
                    Orchestratorê°€
                    ì„±ê³µ/ì‹¤íŒ¨ íŒë‹¨ ë°
                    ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰
```

**ì¥ì :**
- ì „ì²´ íë¦„ ëª…í™•
- ë””ë²„ê¹… ì‰¬ì›€
- ë³´ìƒ ë¡œì§ ì¤‘ì•™ ê´€ë¦¬

**ë‹¨ì :**
- Orchestratorê°€ ë‹¨ì¼ ì¥ì• ì 
- ì„œë¹„ìŠ¤ ê°„ ê²°í•©ë„ ì¦ê°€

**ğŸ¯ ì„ íƒ: Orchestration ë°©ì‹ ì±„íƒ**

ì´ìœ :
- ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ëŠ” ëª…í™•í•œ ìˆœì„œê°€ ìˆìŒ
- ì „ì²´ íë¦„ì„ ì œì–´í•˜ê³  ì‹¶ìŒ
- ë³´ìƒ ë¡œì§ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²Œ ë” ì•ˆì „

### 4.3 ë³´ìƒ íŠ¸ëœì­ì…˜ ì„¤ê³„

ê° ë‹¨ê³„ë§ˆë‹¤ **ë³´ìƒ(Compensating) íŠ¸ëœì­ì…˜**ì„ ì •ì˜í•œë‹¤.

| ë‹¨ê³„ | ì •ìƒ íŠ¸ëœì­ì…˜ | ë³´ìƒ íŠ¸ëœì­ì…˜ |
|------|--------------|--------------|
| 1. ì¬ê³  ì°¨ê° | `decreaseStock()` | `increaseStock()` (ì¬ê³  ë³µêµ¬) |
| 2. ì¿ í° ì‚¬ìš© | `useCoupon()` | `restoreCoupon()` (ì¿ í° ë³µêµ¬) |
| 3. ì”ì•¡ ì°¨ê° | `decreaseBalance()` | `increaseBalance()` (ì”ì•¡ í™˜ë¶ˆ) |
| 4. ì£¼ë¬¸ ìƒì„± | `createOrder()` | `cancelOrder()` (ì£¼ë¬¸ ì·¨ì†Œ) |
| 5. ê²°ì œ ì²˜ë¦¬ | `processPayment()` | `refundPayment()` (ê²°ì œ ì·¨ì†Œ) |

**ë³´ìƒ ì‹¤í–‰ ìˆœì„œ:** ì—­ìˆœìœ¼ë¡œ ì‹¤í–‰

```
ì •ìƒ íë¦„: 1 â†’ 2 â†’ 3 â†’ 4 â†’ 5
ì‹¤íŒ¨ ì‹œ:   5ë‹¨ê³„ ì‹¤íŒ¨ â†’ 4 ë³´ìƒ â†’ 3 ë³´ìƒ â†’ 2 ë³´ìƒ â†’ 1 ë³´ìƒ
```

---

## 5. ìµœì¢… ì•„í‚¤í…ì²˜ ì„¤ê³„

### 5.1 ì£¼ë¬¸ í”„ë¡œì„¸ìŠ¤ SAGA êµ¬í˜„

#### 5.1.1 ì •ìƒ íë¦„

```mermaid
sequenceDiagram
    participant Client
    participant OrderOrchestrator
    participant ProductSvc
    participant CouponSvc
    participant UserSvc
    participant PaymentSvc
    participant OrderSvc

    Client->>OrderOrchestrator: ì£¼ë¬¸ ìš”ì²­

    OrderOrchestrator->>ProductSvc: ì¬ê³  ì°¨ê° ìš”ì²­
    ProductSvc-->>OrderOrchestrator: ì„±ê³µ

    OrderOrchestrator->>CouponSvc: ì¿ í° ì‚¬ìš© ìš”ì²­
    CouponSvc-->>OrderOrchestrator: ì„±ê³µ

    OrderOrchestrator->>UserSvc: ì”ì•¡ ì°¨ê° ìš”ì²­
    UserSvc-->>OrderOrchestrator: ì„±ê³µ

    OrderOrchestrator->>OrderSvc: ì£¼ë¬¸ ìƒì„± ìš”ì²­
    OrderSvc-->>OrderOrchestrator: ì„±ê³µ

    OrderOrchestrator->>PaymentSvc: ê²°ì œ ì²˜ë¦¬ ìš”ì²­
    PaymentSvc-->>OrderOrchestrator: ì„±ê³µ

    OrderOrchestrator-->>Client: ì£¼ë¬¸ ì™„ë£Œ
```

#### 5.1.2 ì‹¤íŒ¨ ë° ë³´ìƒ íë¦„

**ì‹œë‚˜ë¦¬ì˜¤: ê²°ì œ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨**

```mermaid
sequenceDiagram
    participant Client
    participant OrderOrchestrator
    participant ProductSvc
    participant CouponSvc
    participant UserSvc
    participant OrderSvc
    participant PaymentSvc

    Client->>OrderOrchestrator: ì£¼ë¬¸ ìš”ì²­

    Note over OrderOrchestrator: 1ë‹¨ê³„: ì¬ê³  ì°¨ê°
    OrderOrchestrator->>ProductSvc: ì¬ê³  ì°¨ê°
    ProductSvc-->>OrderOrchestrator: ì„±ê³µ âœ…

    Note over OrderOrchestrator: 2ë‹¨ê³„: ì¿ í° ì‚¬ìš©
    OrderOrchestrator->>CouponSvc: ì¿ í° ì‚¬ìš©
    CouponSvc-->>OrderOrchestrator: ì„±ê³µ âœ…

    Note over OrderOrchestrator: 3ë‹¨ê³„: ì”ì•¡ ì°¨ê°
    OrderOrchestrator->>UserSvc: ì”ì•¡ ì°¨ê°
    UserSvc-->>OrderOrchestrator: ì„±ê³µ âœ…

    Note over OrderOrchestrator: 4ë‹¨ê³„: ì£¼ë¬¸ ìƒì„±
    OrderOrchestrator->>OrderSvc: ì£¼ë¬¸ ìƒì„±
    OrderSvc-->>OrderOrchestrator: ì„±ê³µ âœ…

    Note over OrderOrchestrator: 5ë‹¨ê³„: ê²°ì œ ì²˜ë¦¬
    OrderOrchestrator->>PaymentSvc: ê²°ì œ ì²˜ë¦¬
    PaymentSvc-->>OrderOrchestrator: ì‹¤íŒ¨ âŒ

    Note over OrderOrchestrator: ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹œì‘ (ì—­ìˆœ)

    OrderOrchestrator->>OrderSvc: ì£¼ë¬¸ ì·¨ì†Œ (ë³´ìƒ)
    OrderSvc-->>OrderOrchestrator: ì™„ë£Œ

    OrderOrchestrator->>UserSvc: ì”ì•¡ í™˜ë¶ˆ (ë³´ìƒ)
    UserSvc-->>OrderOrchestrator: ì™„ë£Œ

    OrderOrchestrator->>CouponSvc: ì¿ í° ë³µêµ¬ (ë³´ìƒ)
    CouponSvc-->>OrderOrchestrator: ì™„ë£Œ

    OrderOrchestrator->>ProductSvc: ì¬ê³  ë³µêµ¬ (ë³´ìƒ)
    ProductSvc-->>OrderOrchestrator: ì™„ë£Œ

    OrderOrchestrator-->>Client: ì£¼ë¬¸ ì‹¤íŒ¨ (ì „ì²´ ë¡¤ë°± ì™„ë£Œ)
```

### 5.2 Orchestrator êµ¬í˜„ ì˜ˆì‹œ (ì˜ì‚¬ ì½”ë“œ)

```java
@Service
public class OrderOrchestrator {

    private final ProductServiceClient productClient;
    private final CouponServiceClient couponClient;
    private final UserServiceClient userClient;
    private final OrderServiceClient orderClient;
    private final PaymentServiceClient paymentClient;

    public OrderResult executeOrder(OrderRequest request) {
        List<CompensationAction> compensations = new ArrayList<>();

        try {
            // 1ë‹¨ê³„: ì¬ê³  ì°¨ê°
            productClient.decreaseStock(request.getProductId(), request.getQuantity());
            compensations.add(() -> productClient.increaseStock(request.getProductId(), request.getQuantity()));

            // 2ë‹¨ê³„: ì¿ í° ì‚¬ìš©
            if (request.getCouponId() != null) {
                couponClient.useCoupon(request.getCouponId());
                compensations.add(() -> couponClient.restoreCoupon(request.getCouponId()));
            }

            // 3ë‹¨ê³„: ì”ì•¡ ì°¨ê°
            userClient.decreaseBalance(request.getUserId(), request.getFinalAmount());
            compensations.add(() -> userClient.increaseBalance(request.getUserId(), request.getFinalAmount()));

            // 4ë‹¨ê³„: ì£¼ë¬¸ ìƒì„±
            String orderId = orderClient.createOrder(request);
            compensations.add(() -> orderClient.cancelOrder(orderId));

            // 5ë‹¨ê³„: ê²°ì œ ì²˜ë¦¬
            paymentClient.processPayment(orderId, request.getFinalAmount());

            return OrderResult.success(orderId);

        } catch (Exception e) {
            // ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰ (ì—­ìˆœ)
            executeCompensations(compensations);
            return OrderResult.failure(e.getMessage());
        }
    }

    private void executeCompensations(List<CompensationAction> compensations) {
        // ì—­ìˆœìœ¼ë¡œ ë³´ìƒ ì‹¤í–‰
        Collections.reverse(compensations);

        for (CompensationAction compensation : compensations) {
            try {
                compensation.execute();
            } catch (Exception e) {
                // ë³´ìƒ ì‹¤íŒ¨ ì‹œ ë¡œê·¸ ë‚¨ê¸°ê³  ê³„ì† ì§„í–‰
                // ì‹¤ë¬´ì—ì„œëŠ” Dead Letter Queueë‚˜ ê´€ë¦¬ì ì•Œë¦¼ í•„ìš”
                log.error("ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤íŒ¨", e);
            }
        }
    }
}
```

### 5.3 ë©±ë“±ì„±(Idempotency) ë³´ì¥

ë„¤íŠ¸ì›Œí¬ íƒ€ì„ì•„ì›ƒìœ¼ë¡œ ì¸í•œ ì¤‘ë³µ ìš”ì²­ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ë©±ë“±ì„±ì„ ë³´ì¥í•œë‹¤.

**ë°©ë²•: ë©±ë“±ì„± í‚¤(Idempotency Key) ì‚¬ìš©**

```java
@RestController
public class OrderController {

    @PostMapping("/orders")
    public OrderResponse createOrder(
        @RequestBody OrderRequest request,
        @RequestHeader("Idempotency-Key") String idempotencyKey
    ) {
        // 1. ì´ë¯¸ ì²˜ë¦¬ëœ ìš”ì²­ì¸ì§€ í™•ì¸
        Optional<OrderResult> cached = cacheService.get(idempotencyKey);
        if (cached.isPresent()) {
            return cached.get(); // ì´ì „ ê²°ê³¼ ë°˜í™˜
        }

        // 2. ìƒˆë¡œìš´ ìš”ì²­ ì²˜ë¦¬
        OrderResult result = orchestrator.executeOrder(request);

        // 3. ê²°ê³¼ ìºì‹± (24ì‹œê°„)
        cacheService.put(idempotencyKey, result, Duration.ofHours(24));

        return result;
    }
}
```

### 5.4 ìµœì¢… ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚     Client      â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚
                          [Idempotency-Key]
                                   â”‚
                                   â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Order Orchestrator     â”‚
                    â”‚  (SAGA ì¡°ì •ì)            â”‚
                    â”‚                          â”‚
                    â”‚  - íŠ¸ëœì­ì…˜ ìˆœì„œ ì œì–´     â”‚
                    â”‚  - ë³´ìƒ ë¡œì§ ê´€ë¦¬         â”‚
                    â”‚  - ë©±ë“±ì„± ë³´ì¥           â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    â”‚                    â”‚               â”‚
         â–¼                    â–¼                    â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Product â”‚          â”‚ Coupon  â”‚         â”‚  User   â”‚     â”‚ Payment  â”‚
    â”‚ Service â”‚          â”‚ Service â”‚         â”‚ Service â”‚     â”‚ Service  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚                    â”‚                    â”‚                â”‚
         â–¼                    â–¼                    â–¼                â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Product  â”‚          â”‚ Coupon  â”‚         â”‚  User   â”‚     â”‚ Payment  â”‚
    â”‚   DB    â”‚          â”‚   DB    â”‚         â”‚   DB    â”‚     â”‚    DB    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ê° ì„œë¹„ìŠ¤ëŠ” ë¡œì»¬ íŠ¸ëœì­ì…˜ ê´€ë¦¬
    OrchestratorëŠ” ì „ì²´ íë¦„ ì¡°ì •
```

---

## 6. ì¶”ê°€ ê³ ë ¤ ì‚¬í•­

### 6.1 ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤íŒ¨ ì‹œ ëŒ€ì‘

**ë¬¸ì œ:** ë³´ìƒ íŠ¸ëœì­ì…˜ë„ ì‹¤íŒ¨í•  ìˆ˜ ìˆë‹¤.

**í•´ê²° ë°©ì•ˆ:**

1. **ì¬ì‹œë„(Retry) ë©”ì»¤ë‹ˆì¦˜**
   ```java
   @Retry(maxAttempts = 3, backoff = @Backoff(delay = 1000))
   public void compensate() {
       // ë³´ìƒ ë¡œì§
   }
   ```

2. **Dead Letter Queue**
   - ìµœì¢… ì‹¤íŒ¨í•œ ë³´ìƒ ìš”ì²­ì„ ë³„ë„ íì— ì €ì¥
   - ê´€ë¦¬ìê°€ ìˆ˜ë™ìœ¼ë¡œ ì²˜ë¦¬í•˜ê±°ë‚˜, ë°°ì¹˜ë¡œ ì¬ì‹œë„

3. **ì•Œë¦¼ ì‹œìŠ¤í…œ**
   - ë³´ìƒ ì‹¤íŒ¨ ì‹œ ì¦‰ì‹œ ê´€ë¦¬ìì—ê²Œ ì•Œë¦¼
   - Slack, ì´ë©”ì¼ ë“±

### 6.2 ì´ë²¤íŠ¸ ì†Œì‹±(Event Sourcing) ë„ì… ê²€í† 

ëª¨ë“  ìƒíƒœ ë³€ê²½ì„ ì´ë²¤íŠ¸ë¡œ ì €ì¥í•˜ì—¬ ì¶”ì ì„±ì„ ë†’ì¸ë‹¤.

```java
// ì´ë²¤íŠ¸ ì €ì¥ì†Œ
- OrderCreatedEvent
- StockDecreasedEvent
- CouponUsedEvent
- BalanceDecreasedEvent
- PaymentProcessedEvent
- OrderCancelledEvent (ë³´ìƒ)
```

**ì¥ì :**
- ì „ì²´ íë¦„ ì¶”ì  ê°€ëŠ¥
- ì¬í˜„ ê°€ëŠ¥
- ê°ì‚¬(Audit) ë¡œê·¸

### 6.3 ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼

ë¶„ì‚° í™˜ê²½ì—ì„œëŠ” ëª¨ë‹ˆí„°ë§ì´ í•„ìˆ˜ë‹¤.

**ëª¨ë‹ˆí„°ë§ í•­ëª©:**
- ê° ë‹¨ê³„ë³„ ì„±ê³µë¥ 
- ë³´ìƒ íŠ¸ëœì­ì…˜ ì‹¤í–‰ íšŸìˆ˜
- í‰ê·  ì²˜ë¦¬ ì‹œê°„
- íƒ€ì„ì•„ì›ƒ ë°œìƒ ë¹ˆë„

**ë„êµ¬:**
- Prometheus + Grafana
- ELK Stack
- Distributed Tracing (Zipkin, Jaeger)

---

## 7. ê²°ë¡ 

### 7.1 MSA ì „í™˜ í›„ ë‹¬ë¼ì§€ëŠ” ì 

| í•­ëª© | ëª¨ë†€ë¦¬ì‹ | MSA (SAGA ì ìš©) |
|------|----------|----------------|
| **íŠ¸ëœì­ì…˜** | ë‹¨ì¼ ACID íŠ¸ëœì­ì…˜ | ë¶„ì‚° íŠ¸ëœì­ì…˜ (ìµœì¢… ì¼ê´€ì„±) |
| **ì¼ê´€ì„±** | ê°•í•œ ì¼ê´€ì„± | ìµœì¢… ì¼ê´€ì„± (Eventual Consistency) |
| **ì‹¤íŒ¨ ì²˜ë¦¬** | ìë™ ë¡¤ë°± | ë³´ìƒ íŠ¸ëœì­ì…˜ í•„ìš” |
| **ë³µì¡ë„** | ë‚®ìŒ | ë†’ìŒ (ë³´ìƒ ë¡œì§, ë©±ë“±ì„± ë“±) |
| **í™•ì¥ì„±** | ì œí•œì  | ë†’ìŒ (ì„œë¹„ìŠ¤ë³„ ë…ë¦½ í™•ì¥) |
| **ì¥ì•  ê²©ë¦¬** | ë¶ˆê°€ëŠ¥ | ê°€ëŠ¥ (í•œ ì„œë¹„ìŠ¤ ì¥ì• ê°€ ì „ì²´ì— ì˜í–¥ X) |

### 7.2 íŠ¸ë ˆì´ë“œì˜¤í”„

**ì–»ëŠ” ê²ƒ:**
- ì„œë¹„ìŠ¤ë³„ ë…ë¦½ì ì¸ ë°°í¬
- ìˆ˜í‰ í™•ì¥ ê°€ëŠ¥
- ê¸°ìˆ  ìŠ¤íƒ ììœ ë„
- ì¥ì•  ê²©ë¦¬

**ìƒëŠ” ê²ƒ:**
- ë‹¨ìˆœí•¨ (ë³µì¡ë„ ì¦ê°€)
- ê°•í•œ ì¼ê´€ì„± ë³´ì¥
- ê°œë°œ ë° ìš´ì˜ ë‚œì´ë„ ì¦ê°€

### 7.3 ê¶Œì¥ ì‚¬í•­

1. **ì ì§„ì  ì „í™˜**
   - í•œ ë²ˆì— ëª¨ë“  ì„œë¹„ìŠ¤ë¥¼ ë¶„ë¦¬í•˜ì§€ ë§ê³ , ì ì§„ì ìœ¼ë¡œ ì „í™˜
   - ì˜ˆ: Order â†’ Payment ë¶„ë¦¬ â†’ ì•ˆì •í™” â†’ Product ë¶„ë¦¬ ...

2. **ì¶©ë¶„í•œ í…ŒìŠ¤íŠ¸**
   - ê°ì¢… ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ í•„ìˆ˜
   - Chaos Engineering ë„ì… ê²€í† 

3. **ëª…í™•í•œ ë„ë©”ì¸ ê²½ê³„**
   - Bounded Contextë¥¼ ëª…í™•íˆ ì •ì˜
   - ì„œë¹„ìŠ¤ ê°„ ì˜ì¡´ì„± ìµœì†Œí™”

4. **ìš´ì˜ ìë™í™”**
   - CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
   - ëª¨ë‹ˆí„°ë§ ë° ì•Œë¦¼ ì‹œìŠ¤í…œ í•„ìˆ˜

ì´ ì„¤ê³„ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•ˆì •ì ì¸ MSA ì „í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.
